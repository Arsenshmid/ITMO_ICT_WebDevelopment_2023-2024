File: models.py
from django.contrib.auth.models import AbstractUser, Group, Permission
from django.db import models


class Agency(models.Model):
    name = models.CharField(max_length=255)
    #description = models.CharField(max_length=255)

class Tour(models.Model):
    name = models.CharField(max_length=255)
    agency = models.ForeignKey(Agency, on_delete=models.CASCADE)
    description = models.TextField()
    start_date = models.DateField()
    end_date = models.DateField()
    payment_conditions = models.TextField()


class Users(AbstractUser):
    groups = models.ManyToManyField(Group, related_name='custom_user_set')
    user_permissions = models.ManyToManyField(Permission, related_name='custom_user_set')



class Reservation(models.Model):
    users = models.ForeignKey(Users, on_delete=models.CASCADE)
    tour = models.ForeignKey(Tour, on_delete=models.CASCADE)
    is_confirmed = models.BooleanField(default=False)

class Review(models.Model):
    users = models.ForeignKey(Users, on_delete=models.CASCADE)
    tour = models.ForeignKey(Tour, on_delete=models.CASCADE)
    text = models.TextField()
    rating = models.IntegerField()
    created_at = models.DateTimeField(auto_now_add=True)File: settings.py
File: admin.py
from django.contrib import admin
from django.contrib.auth.admin import UserAdmin
from .forms import CustomUserChangeForm, CustomUserCreationForm
from .models import Agency, Tour, Users, Reservation, Review

admin.site.register(Agency)
admin.site.register(Tour)

class CustomUserAdmin(UserAdmin):
    form = CustomUserChangeForm
    add_form = CustomUserCreationForm

admin.site.register(Users, CustomUserAdmin)

admin.site.register(Reservation)
admin.site.register(Review)
File: urls.py
File: views.py
from django.shortcuts import render, get_object_or_404
from .models import Tour, Agency, Reservation, Review

def tour_list_view(request):
    tours = Tour.objects.all()
    return render(request, 'tour_list.html', {'tours': tours})

def tour_detail_view(request, pk):
    tour = get_object_or_404(Tour, pk=pk)
    return render(request, 'tour_detail.html', {'tour': tour})

def agency_detail_view(request, pk):
    agency = get_object_or_404(Agency, pk=pk)
    return render(request, 'agency_detail.html', {'agency': agency})

def reservation_detail_view(request, pk):
    reservation = get_object_or_404(Reservation, pk=pk)
    return render(request, 'reservation_detail.html', {'reservation': reservation})

def review_detail_view(request, pk):
    review = get_object_or_404(Review, pk=pk)
    return render(request, 'review_detail.html', {'review': review})
